{"version":3,"sources":["components/Blog.js","components/Notification.js","services/blogs.js","services/login.js","components/LoginForm.js","components/BlogForm.js","components/Togglable.js","App.js","index.js"],"names":["Blog","blog","addLike","removeBlog","user","useState","visible","setVisible","username","setUsername","hideWhenVisible","display","showWhenVisible","toggleVisibility","style","paddingTop","paddingLeft","border","borderWidth","marginBottom","title","author","onClick","likes","blogObject","id","url","protoTypes","PropTypes","object","isRequired","func","Notification","message","className","type","text","baseUrl","token","getAll","axios","get","then","response","data","create","newObject","a","config","headers","Authorization","post","request","update","put","setToken","newToken","remove","delete","login","credentials","LoginForm","handleSubmit","handleUsernameChange","handlePasswordChange","password","onSubmit","name","value","onChange","BlogForm","createBlog","setTitle","setAuthor","setUrl","event","preventDefault","target","Togglable","React","forwardRef","props","ref","useImperativeHandle","buttonLabel","children","displayName","App","blogs","setBlogs","noti","setNoti","setPassword","setUser","useEffect","blogService","loggedUserJSON","window","localStorage","getItem","JSON","parse","blogFormRef","useRef","addBlog","current","returnedBlog","setTimeout","concat","catch","blogToUpdate","map","blogToRemove","find","msg","confirm","filter","error","console","log","handleLogin","loginService","setItem","stringify","removeItem","sort","b","i","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.765764fa.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Blog = ({ blog, addLike, removeBlog, user }) => {\r\n  const [visible, setVisible] = useState(false)\r\n  const [username, setUsername] = useState('')\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  const blogStyle = {\r\n    paddingTop: 10,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5\r\n  }\r\n\r\n  const handleLike = () => {\r\n    const blogObject = {\r\n      user: blog.user.id || blog.user,\r\n      likes: blog.likes + 1,\r\n      author: blog.author,\r\n      title: blog.title,\r\n      url: blog.url\r\n    }\r\n    setUsername(blog.user.username || username)\r\n    addLike(blog.id ,blogObject)\r\n  }\r\n\r\n  return (\r\n    <div style={blogStyle}>\r\n      <div style={hideWhenVisible}>\r\n        <p>{blog.title} - {blog.author}\r\n          <button onClick={toggleVisibility}>View</button>\r\n        </p>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        <p>Title: {blog.title}\r\n          <button onClick={toggleVisibility}>Hide</button>\r\n        </p>\r\n        <p>Author: {blog.author}</p>\r\n        <p>Likes: {blog.likes}\r\n          <button onClick={handleLike}>Like</button>\r\n        </p>\r\n        {(user.username === blog.user.username ||\r\n          user.username === username) &&\r\n          <button onClick={() => removeBlog(blog.id)}>Remove</button>\r\n        }\r\n      </div>\r\n    </div>\r\n  )}\r\n\r\nBlog.protoTypes = {\r\n  blog: PropTypes.object.isRequired,\r\n  addLike: PropTypes.func.isRequired,\r\n  removeBlog: PropTypes.func.isRequired,\r\n  user: PropTypes.object.isRequired\r\n}\r\n\r\nexport default Blog","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={`noti noti_${message.type}`}>\r\n      {message.text}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/blogs'\r\n\r\nlet token = null\r\n\r\nconst setToken = newToken => {\r\n  token = `bearer ${newToken}`\r\n}\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = async newObject => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n\r\n  const request = await axios.post(baseUrl, newObject, config)\r\n  return request.data\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  }\r\n  const request = axios.delete(`${baseUrl}/${id}`, config)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, setToken, remove }","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async credentials => {\r\n  const response = await axios.post(baseUrl, credentials)\r\n  return response.data\r\n}\r\n\r\nexport default { login }","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst LoginForm = ({\r\n  handleSubmit,\r\n  handleUsernameChange,\r\n  handlePasswordChange,\r\n  username,\r\n  password\r\n}) => {\r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          username\r\n          <input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            value={username}\r\n            onChange={handleUsernameChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          password\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n          />\r\n        </div>\r\n        <button type=\"submit\">login</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nLoginForm.propTypes = {\r\n  handleSubmit: PropTypes.func.isRequired,\r\n  handleUsernameChange: PropTypes.func.isRequired,\r\n  handlePasswordChange: PropTypes.func.isRequired,\r\n  username: PropTypes.string.isRequired,\r\n  password: PropTypes.string.isRequired\r\n}\r\n\r\nexport default LoginForm","import React, { useState } from 'react'\r\n\r\nconst BlogForm = ({ createBlog }) => {\r\n\r\n    const [title, setTitle] = useState('')\r\n    const [author, setAuthor] = useState('')\r\n    const [url, setUrl] = useState('')\r\n\r\n    const addBlog = (event) => {\r\n        event.preventDefault()\r\n        createBlog({\r\n            title: title,\r\n            author: author,\r\n            url: url\r\n        })\r\n        setTitle('')\r\n        setAuthor('')\r\n        setUrl('')\r\n    }\r\n\r\n    return (\r\n        <div>\r\n        <h2>Create a new blog</h2>\r\n        <form onSubmit={addBlog}>\r\n            <div>\r\n            title\r\n            <input value={title} onChange={({ target }) => setTitle(target.value)}/>\r\n            </div>\r\n            <div>\r\n            author\r\n            <input value={author} onChange={({ target }) => setAuthor(target.value)}/>\r\n            </div>\r\n            <div>\r\n            url\r\n            <input value={url} onChange={({ target }) => setUrl(target.value)}/>\r\n            </div>\r\n            <button type=\"submit\">create</button>\r\n        </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BlogForm","import React, { useState, useImperativeHandle } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Togglable = React.forwardRef((props, ref) => {\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const hideWhenVisible = { display: visible ? 'none' : '' }\r\n  const showWhenVisible = { display: visible ? '' : 'none' }\r\n\r\n  const toggleVisibility = () => {\r\n    setVisible(!visible)\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      toggleVisibility\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <div style={hideWhenVisible}>\r\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\r\n      </div>\r\n      <div style={showWhenVisible}>\r\n        {props.children}\r\n        <button onClick={toggleVisibility}>cancel</button>\r\n      </div>\r\n    </div>\r\n  )\r\n})\r\n\r\nTogglable.displayName = 'Togglable'\r\n\r\nTogglable.propTypes = {\r\n  buttonLabel: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Togglable","import React, { useState, useEffect, useRef } from 'react'\r\nimport Blog from './components/Blog'\r\nimport Notification from './components/Notification'\r\nimport blogService from './services/blogs'\r\nimport loginService from './services/login'\r\nimport LoginForm from './components/LoginForm'\r\nimport BlogForm from './components/BlogForm'\r\nimport Togglable from './components/Togglable'\r\n\r\nconst App = () => {\r\n  const [blogs, setBlogs] = useState([])\r\n\r\n  const [noti, setNoti] = useState(null)\r\n\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n\r\n  const [user, setUser] = useState(null)\r\n\r\n  useEffect(() => {\r\n    blogService\r\n      .getAll()\r\n      .then(blogs =>\r\n        setBlogs( blogs )\r\n      )\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedNoteappUser')\r\n    if (loggedUserJSON) {\r\n      const user = JSON.parse(loggedUserJSON)\r\n      setUser(user)\r\n      blogService.setToken(user.token)\r\n    }\r\n  }, [])\r\n\r\n  const blogFormRef = useRef()\r\n\r\n  const addBlog = (blogObject) => {\r\n    blogFormRef.current.toggleVisibility()\r\n    blogService\r\n      .create(blogObject)\r\n      .then(returnedBlog => {\r\n        setNoti({\r\n          text: `a new blog ${blogObject.title} by ${blogObject.author} added`,\r\n          type: 'success'\r\n        })\r\n        setTimeout(() => {\r\n          setNoti(null)\r\n        }, 5000)\r\n        setBlogs(blogs.concat(returnedBlog))\r\n      })\r\n      .catch(() => {\r\n        setNoti({\r\n          text: `Blog can't be added`,\r\n          type: 'error'\r\n        })\r\n        setTimeout(() => {\r\n          setNoti(null)\r\n        }, 5000)\r\n      })\r\n  }\r\n\r\n  const addLike = (id, blogObject) => {\r\n\r\n    blogService.update(id, blogObject)\r\n\r\n    const blogToUpdate = {\r\n      ...blogObject,\r\n      id\r\n    }\r\n    setBlogs(blogs.map(blog => blog.id !== id ? blog : blogToUpdate))\r\n  }\r\n\r\n  const removeBlog = async (id) => {\r\n    const blogToRemove = blogs.find(blog => blog.id === id)\r\n    const msg = `Remove blog ${blogToRemove.title} by ${blogToRemove.author}`\r\n\r\n    if (window.confirm(msg) === true) {\r\n      blogService\r\n        .remove(id)\r\n        .then(() => {\r\n          setBlogs(blogs.filter(blog => blog.id !== id))\r\n          setNoti({\r\n            text: `blog ${blogToRemove.title} by ${blogToRemove.author} removed`,\r\n            type: 'success'\r\n          })\r\n          setTimeout(() => {\r\n            setNoti(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n        })\r\n    }\r\n  }\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault()\r\n    try {\r\n      const user = await loginService.login({\r\n        username, password,\r\n      })\r\n\r\n      window.localStorage.setItem(\r\n        'loggedBlogappUser', JSON.stringify(user)\r\n      )\r\n\r\n      blogService.setToken(user.token)\r\n      setUser(user)\r\n      setUsername('')\r\n      setPassword('')\r\n    } catch (exception) {\r\n      setNoti({\r\n        text:`wrong username or password`,\r\n        type: 'error'\r\n      })\r\n      setTimeout(() => {\r\n        setNoti(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const handleLogout = () => {\r\n    window.localStorage.removeItem('loggedNoteappUser')\r\n    setUser(null)\r\n  }\r\n\r\n  const loginForm = () => (\r\n    <Togglable buttonLabel='Login'>\r\n      <LoginForm\r\n        username={username}\r\n        password={password}\r\n        handleUsernameChange={({ target }) => setUsername(target.value)}\r\n        handlePasswordChange={({ target }) => setPassword(target.value)}\r\n        handleSubmit={handleLogin}\r\n      />\r\n    </Togglable>\r\n  )\r\n\r\n  const blogForm = () => (\r\n    <Togglable buttonLabel='New Blog' ref={blogFormRef}>\r\n      <BlogForm\r\n        createBlog={addBlog}\r\n      />\r\n    </Togglable>\r\n  )\r\n\r\n  return (\r\n    <div>\r\n      <h2>Blogs</h2>\r\n      <Notification message={noti} />\r\n\r\n      {user === null ?\r\n        loginForm() :\r\n        <div>\r\n          <p>{user.name} logged-in</p>\r\n          <button onClick={handleLogout}>logout</button>\r\n          <h2>Create new</h2>\r\n          {blogForm()}\r\n          <h2>All blogs</h2>\r\n          <ul>\r\n            {blogs\r\n              .sort((a, b) => a.likes - b.likes)\r\n              .map((blog, i) =>\r\n                <Blog\r\n                  key={i}\r\n                  blog={blog}\r\n                  addLike={addLike}\r\n                  removeBlog={removeBlog}\r\n                  user={user}\r\n                />\r\n              )}\r\n          </ul>\r\n        </div>\r\n      }\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}