(this["webpackJsonppart2_6-10"]=this["webpackJsonppart2_6-10"]||[]).push([[0],{21:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(16),i=n.n(a),u=(n(21),n(7)),o=n(3),s=n(0),d=function(e){var t=e.data,n=e.removeInfo;return Object(s.jsx)("div",{children:t.map((function(e){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:[e.name," ",e.number," "]}),Object(s.jsx)("button",{type:"submit",onClick:function(){n(e)},children:"delete"})]},e.id)}))})},l=function(e){var t=e.submitName,n=e.newName,r=e.handleNameChange,c=e.newNumber,a=e.handleNumberChange;return Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("div",{children:["name:",Object(s.jsx)("input",{value:n,onChange:r})]}),Object(s.jsxs)("div",{children:["number:",Object(s.jsx)("input",{value:c,onChange:a})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"Add"})})]})},h=function(e){var t=e.searchQuery,n=e.handleSearchChange,r=e.foundPer;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:["Filter shown with",Object(s.jsx)("input",{value:t,type:"text",placeholder:"Search...",onChange:n})]}),Object(s.jsx)("div",{children:r.map((function(e){return Object(s.jsx)("div",{children:Object(s.jsxs)("p",{children:[e.name," ",e.number]})},e.id)}))})]})},b=function(e){var t=e.message;return null===t?null:Object(s.jsx)("div",{className:"noti noti_".concat(t.type),children:t.text})},j=n(4),f=n.n(j),m="/api/persons",O=function(){return f.a.get(m).then((function(e){return e.data}))},p=function(e){return f.a.post(m,e).then((function(e){return e.data}))},v=function(e,t){return f.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},x=function(e){return f.a.delete("".concat(m,"/").concat(e))},g=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),i=Object(o.a)(a,2),j=i[0],f=i[1],m=Object(r.useState)(""),g=Object(o.a)(m,2),w=g[0],y=g[1],N=Object(r.useState)(""),C=Object(o.a)(N,2),S=C[0],T=C[1],k=Object(r.useState)([]),E=Object(o.a)(k,2),I=E[0],P=E[1],_=Object(r.useState)(null),A=Object(o.a)(_,2),D=A[0],J=A[1];Object(r.useEffect)((function(){O().then((function(e){c(e)}))}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(b,{message:D}),Object(s.jsx)(h,{searchQuery:S,handleSearchChange:function(e){T(e.target.value);var t=n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(S.toLowerCase())}));P(t)},foundPer:I}),Object(s.jsx)("h2",{children:" Add a new contact"}),Object(s.jsx)(l,{submitName:function(e){e.preventDefault();var t={name:j,number:w};if(j.length<3)return J({text:"Name is too short, please provide a name with at least 3 digits",type:"error"}),void setTimeout((function(){J(null)}),5e3);if(w.length<8)return J({text:"number is too short, please provide a number with at least 8 digits",type:"error"}),void setTimeout((function(){J(null)}),5e3);var r=n.find((function(e){return e.name===t.name}));if(r){var a=Object(u.a)(Object(u.a)({},r),{},{number:t.number});if(w.length<8)return J({text:"number is too short, please provide a number with at least 8 digits",type:"error"}),void setTimeout((function(){J(null)}),5e3);var i=t.name+" is already added to phonebook, replace the old number with a new one?";!0===window.confirm(i)&&v(r.id,a).then((function(e){c(n.map((function(t){return t.id!==r.id?t:e}))),f(""),y(""),J({text:"Edited ".concat(t.name),type:"noti"}),setTimeout((function(){J(null)}),5e3)})).catch((function(e){J({text:"'".concat(t.name,"' was already deleted from server!"),type:"error"}),c(n.filter((function(e){return e.id!==r.id}))),setTimeout((function(){J(null)}),5e3)}))}else p(t).then((function(e){J({text:"'".concat(t.name,"' was successfully added to the phonebook!"),type:"noti"}),setTimeout((function(){J(null)}),5e3),c(n.concat(e)),f(""),y("")})).catch((function(e){J(e.response.data),setTimeout((function(){J(null)}),5e3)}))},newName:j,handleNameChange:function(e){f(e.target.value)},newNumber:w,handleNumberChange:function(e){y(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(d,{data:n,removeInfo:function(e){var t=e.name,r=e.id,a="Delete "+t+" ?";!0===window.confirm(a)&&x(r).then((function(e){c(n.filter((function(e){return e.id!==r})))}))}})]})};i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(g,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.557c0e0e.chunk.js.map